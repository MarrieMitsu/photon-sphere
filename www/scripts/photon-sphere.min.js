/**
 * PhotonSphere v2.0.0
 *
 * Copyright (c) 2022 MarrieMitsu <isnainromadoni@gmail.com>
 * Released under the MIT license
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).PhotonSphere=n()}(this,(function(){"use strict";var t=360,n=359.99998,i="uniform",o="rounded",p="edge",e="reverse-edge",r="double-edge",y="reverse-double-edge",x="bevelled-edge",a="uniform-iontail",u="uniform-antitail",s="top-bevelled-iontail",c="top-bevelled-antitail",l="bottom-bevelled-iontail",h="bottom-bevelled-antitail",f="comet",v="reverse-comet",d="meteor",C="reverse-meteor",g="grow",b="shrink",m={M:function(t,n){return"M "+t+","+n},m:function(t,n){return"m "+t+","+n}},A={L:function(t,n){return"L "+t+","+n},l:function(t,n){return"l "+t+","+n},H:function(t){return"H "+t},h:function(t){return"h "+t},V:function(t){return"V "+t},v:function(t){return"v "+t}},M={C:function(t,n,i,o,p,e){return"C "+t+","+n+" "+i+","+o+" "+p+","+e},c:function(t,n,i,o,p,e){return"c "+t+","+n+" "+i+","+o+" "+p+","+e},S:function(t,n,i,o){return"S "+t+","+n+" "+i+","+o},s:function(t,n,i,o){return"s "+t+","+n+", "+i+","+o}},w={A:function(t,n,i,o,p,e,r){return"A "+t+","+n+" "+i+" "+o+" "+p+" "+e+","+r},a:function(t,n,i,o,p,e,r){return"a "+t+","+n+" "+i+" "+o+" "+p+" "+e+","+r}},k="Z";function L(t){return t*(Math.PI/180)}function S(t){return t/(Math.PI/180)}function P(i){return i/t>0&&i%t==0?n:i%t}function E(t,n){return void 0===n&&(n=4),Math.round((t+Number.EPSILON)*Math.pow(10,n))/Math.pow(10,n)}function T(t,n,i){var o=n/2-t/2;return"center"===i?o:"face-in"===i?2*o:0}function j(t,n){return void 0===n&&(n=!1),n?0:t>180?1:0}function I(t,n,i,o){void 0===o&&(o=[]);var p="",e=0;if(t)for(;e<4;){var r=void 0,y=void 0;o.length>=e+1?(r=o[e].radius,y=o[e].point):(r=o[o.length-1].radius,y=o[o.length-1].point),p+=w.A(r,r,0,n,i,y.x,y.y)+" ",e++}else for(;e<o.length;){var x=o[e].radius,a=o[e].point;p+=w.A(x,x,0,n,i,a.x,a.y)+" ",e++}return p}function H(t,n){return{x:t*Math.cos(L(n)),y:t*Math.sin(L(n))}}function N(t,n,i,o,p,e,r){var y,x=n-o,a=[];if(1===t)y=x;else if(2===t)y=x-i/2;else{if(3!==t)throw new RangeError("[getCircularArcLocus]: the layer value must be between 1 and 3.");y=x-i}if(p){var u,s,c;r>e?(u=e,s=r):(u=r,s=e),c=s-u;for(var l=Math.ceil(c/90),h=0;h<=l;){var f=u+90*h;f>=s&&(f=s);var v=H(y,f);v.x=E(n+v.x),v.y=E(n-v.y),a.push({radius:y,point:v}),h++}r<e&&a.reverse()}else{var d=H(y,e),C=H(y,r);d.x=E(n+d.x),d.y=E(n-d.y),C.x=E(n+C.x),C.y=E(n-C.y),a.push.apply(a,[{radius:y,point:d},{radius:y,point:C}])}return a}function R(t,n,i,o,p,e,r){var y,x,a,u=n-o;r>e?(y=e,x=r):(y=r,x=e),a=x-y;for(var s=Math.ceil(a/90),c=i/2/s,l=u-i/2,h=[],f=0;f<=s;){var v=void 0,d=void 0,C=void 0;if((v=y+90*f)>=x&&(v=x),1===t)p===g?d=l+c*f:p===b&&(d=u-c*f),C=H(d,v);else{if(3!==t)throw new RangeError("[getSpiralArcLocus]: the layer value must be 1 or 3.");p===g?d=l-c*f:p===b&&(d=u-i+c*f),C=H(d,v)}C.x=E(n+C.x),C.y=E(n-C.y),h.push({radius:d,point:C}),f++}return r<e&&h.reverse(),h}function V(t,n,i,o,p,e){var r,y,x,a=j(e-p,o),u=N(1,t,n,i,o,p,e),s=u[0],c=u[u.length-1],l=N(3,t,n,i,o,e,p),h=l[0],f=l[l.length-1];if(r=m.M(s.point.x,s.point.y),y=I(o,a,0,u.slice(1)),x=I(o,a,1,l.slice(1)),o){var v=N(2,t,n,i,o,e,p),d=v[0],C=v[v.length-1];return r+" "+y+" "+M.C(c.point.x,c.point.y,d.point.x,d.point.y,d.point.x,d.point.y)+" "+M.C(d.point.x,d.point.y,h.point.x,h.point.y,h.point.x,h.point.y)+" "+x+" "+M.C(f.point.x,f.point.y,C.point.x,C.point.y,C.point.x,C.point.y)+" "+M.C(C.point.x,C.point.y,s.point.x,s.point.y,s.point.x,s.point.y)}return r+" "+y+" "+A.L(h.point.x,h.point.y)+" "+x+" "+k}function D(t,n,i,o,p,e){var r=j(e-p,o),y=S(n/2/t),x=N(1,t,n,i,o,p+y,e-y),a=x[0],u=N(3,t,n,i,o,e-y,p+y),s=u[0],c=N(1,t,n,i,o,p,e),l=c[0],h=c[c.length-1],f=N(3,t,n,i,o,e,p),v=f[0],d=f[f.length-1],C=N(2,t,n,i,o,e,p),g=C[0],b=C[C.length-1];return m.M(a.point.x,a.point.y)+" "+I(o,r,0,x.slice(1))+" "+M.C(h.point.x,h.point.y,g.point.x,g.point.y,g.point.x,g.point.y)+" "+M.C(g.point.x,g.point.y,v.point.x,v.point.y,s.point.x,s.point.y)+" "+I(o,r,1,u.slice(1))+" "+M.C(d.point.x,d.point.y,b.point.x,b.point.y,b.point.x,b.point.y)+" "+M.C(b.point.x,b.point.y,l.point.x,l.point.y,a.point.x,a.point.y)}function O(t,n,i,o,x,a,u){var s,c,l=j(u-a,o),h=S(n/2/t);x===p?(s=N(1,t,n,i,o,a,u-h),c=N(3,t,n,i,o,u,a+h)):x===e?(s=N(1,t,n,i,o,a+h,u),c=N(3,t,n,i,o,u-h,a)):x===r?(s=N(1,t,n,i,o,a+h,u-h),c=N(3,t,n,i,o,u,a)):x===y&&(s=N(1,t,n,i,o,a,u),c=N(3,t,n,i,o,u-h,a+h));var f,v,d,C=s[0],g=s[s.length-1],b=c[0],w=c[c.length-1];return f=m.M(C.point.x,C.point.y),v=I(o,l,0,s.slice(1)),d=I(o,l,1,c.slice(1)),o?f+" "+v+" "+M.C(g.point.x,g.point.y,g.point.x,g.point.y,g.point.x,g.point.y)+" "+M.C(g.point.x,g.point.y,b.point.x,b.point.y,b.point.x,b.point.y)+" "+d+" "+M.C(w.point.x,w.point.y,w.point.x,w.point.y,w.point.x,w.point.y)+" "+M.C(w.point.x,w.point.y,C.point.x,C.point.y,C.point.x,C.point.y):f+" "+v+" "+A.L(b.point.x,b.point.y)+" "+d+" "+k}function Z(t,n,i,o,p,e){var r=j(e-p,o),y=S(n/t),x=N(1,t,n,i,o,p+y,e-y),a=x[0],u=x[x.length-1],s=N(3,t,n,i,o,e-y,p+y),c=s[0],l=s[s.length-1],h=N(2,t,n,i,o,e,p),f=h[0],v=h[h.length-1];return m.M(a.point.x,a.point.y)+" "+I(o,r,0,x.slice(1))+" "+M.C(u.point.x,u.point.y,f.point.x,f.point.y,f.point.x,f.point.y)+" "+M.C(f.point.x,f.point.y,c.point.x,c.point.y,c.point.x,c.point.y)+" "+I(o,r,1,s.slice(1))+" "+M.C(l.point.x,l.point.y,v.point.x,v.point.y,v.point.x,v.point.y)+" "+M.C(v.point.x,v.point.y,a.point.x,a.point.y,a.point.x,a.point.y)}function q(t,n,i,o,p,e,r){var y,x;p===a?(y=R(1,t,n,i,g,e,r),x=R(3,t,n,i,g,r,e)):p===u&&(y=R(1,t,n,i,b,e,r),x=R(3,t,n,i,b,r,e));var s,c,l,h,f,v,d,C=y[0],w=y[y.length-1],L=x[0],S=x[x.length-1];return s=m.M(C.point.x,C.point.y),c=I(o,0,0,y.slice(1)),f=I(o,0,1,x.slice(1)),o?(l=M.C(w.point.x,w.point.y,w.point.x,w.point.y,w.point.x,w.point.y),d=M.C(C.point.x,C.point.y,C.point.x,C.point.y,C.point.x,C.point.y),p===a?(h=M.C(w.point.x,w.point.y,L.point.x,L.point.y,L.point.x,L.point.y),v=M.C(C.point.x,C.point.y,C.point.x,C.point.y,C.point.x,C.point.y)):p===u&&(h=M.C(w.point.x,w.point.y,w.point.x,w.point.y,w.point.x,w.point.y),v=M.C(S.point.x,S.point.y,C.point.x,C.point.y,C.point.x,C.point.y)),s+" "+c+" "+l+" "+h+" "+f+" "+v+" "+d):p===a?s+" "+c+" "+(l=A.L(L.point.x,L.point.y))+" "+f:p===u?s+" "+c+" "+f+" "+(v=k):void 0}function z(t,n,i,o,p,e,r){var y,x,a=S(n/t);p===s?(y=R(1,t,n,i,g,e,r-a),x=R(3,t,n,i,g,r,e)):p===c?(y=R(1,t,n,i,b,e+a,r),x=R(3,t,n,i,b,r,e)):p===l?(y=R(1,t,n,i,g,e,r),x=R(3,t,n,i,g,r-a,e)):p===h&&(y=R(1,t,n,i,b,e,r),x=R(3,t,n,i,b,r,e+a));var u,f,v,d,C,w,L,P=y[0],E=y[y.length-1],T=x[0],j=x[x.length-1];return u=m.M(P.point.x,P.point.y),f=I(o,0,0,y.slice(1)),C=I(o,0,1,x.slice(1)),o?(v=M.C(E.point.x,E.point.y,E.point.x,E.point.y,E.point.x,E.point.y),w=M.C(j.point.x,j.point.y,j.point.x,j.point.y,j.point.x,j.point.y),L=M.C(j.point.x,j.point.y,P.point.x,P.point.y,P.point.x,P.point.y),p===s||p===l?d=M.C(E.point.x,E.point.y,T.point.x,T.point.y,T.point.x,T.point.y):p!==c&&p!==h||(d=M.C(E.point.x,E.point.y,E.point.x,E.point.y,E.point.x,E.point.y)),u+" "+f+" "+v+" "+d+" "+C+" "+w+" "+L):p===s||p===l?u+" "+f+" "+(v=A.L(T.point.x,T.point.y))+" "+C:p===c||p===h?u+" "+f+" "+C+" "+(w=k):void 0}function B(t,n,i,o,p,e,r){var y,x,a=S(n/t);p===f?(y=R(1,t,n,i,g,e,r-a),x=R(3,t,n,i,g,r-a,e)):p===v&&(y=R(1,t,n,i,b,e+a,r),x=R(3,t,n,i,b,r,e+a));var u,s,c,l,h,d,C,A=y[0],w=y[y.length-1],k=x[0],L=x[x.length-1],P=N(1,t,n,i,o,e,r),E=P[0],T=P[P.length-1],j=N(3,t,n,i,o,r,e),H=j[0],V=j[j.length-1],D=N(2,t,n,i,o,e,r),O=D[0],Z=D[D.length-1];return u=m.M(A.point.x,A.point.y),s=I(o,0,0,y.slice(1)),h=I(o,0,1,x.slice(1)),o?(p===f?(c=M.C(T.point.x,T.point.y,Z.point.x,Z.point.y,Z.point.x,Z.point.y),l=M.C(Z.point.x,Z.point.y,H.point.x,H.point.y,k.point.x,k.point.y),d=M.C(L.point.x,L.point.y,L.point.x,L.point.y,L.point.x,L.point.y),C=M.C(L.point.x,L.point.y,A.point.x,A.point.y,A.point.x,A.point.y)):p===v&&(c=M.C(w.point.x,w.point.y,w.point.x,w.point.y,w.point.x,w.point.y),l=M.C(w.point.x,w.point.y,k.point.x,k.point.y,k.point.x,k.point.y),d=M.C(V.point.x,V.point.y,O.point.x,O.point.y,O.point.x,O.point.y),C=M.C(O.point.x,O.point.y,E.point.x,E.point.y,A.point.x,A.point.y)),u+" "+s+" "+c+" "+l+" "+h+" "+d+" "+C):p===f?u+" "+s+" "+(c=M.C(T.point.x,T.point.y,Z.point.x,Z.point.y,Z.point.x,Z.point.y))+" "+(l=M.C(Z.point.x,Z.point.y,H.point.x,H.point.y,k.point.x,k.point.y))+" "+h:p===v?u+" "+s+" "+h+" "+(d=M.C(V.point.x,V.point.y,O.point.x,O.point.y,O.point.x,O.point.y))+" "+(C=M.C(O.point.x,O.point.y,E.point.x,E.point.y,A.point.x,A.point.y)):void 0}function F(t,n,i,o,p,e,r){var y,x,a=S(n/t);p===d?(y=R(1,t,n,i,g,e,r-a),x=R(3,t,n,i,g,r-a,e)):p===C&&(y=R(1,t,n,i,b,e+a,r),x=R(3,t,n,i,b,r,e+a));var u,s,c,l,h,f,v,A=y[0],w=y[y.length-1],k=x[0],L=x[x.length-1],P=N(2,t,n,i,o,e,r),E=P[0],T=P[P.length-1];return u=m.M(A.point.x,A.point.y),s=I(o,0,0,y.slice(1)),h=I(o,0,1,x.slice(1)),o?(p===d?(c=M.C(w.point.x,w.point.y,T.point.x,T.point.y,T.point.x,T.point.y),l=M.C(T.point.x,T.point.y,k.point.x,k.point.y,k.point.x,k.point.y),f=M.C(L.point.x,L.point.y,L.point.x,L.point.y,L.point.x,L.point.y),v=M.C(L.point.x,L.point.y,A.point.x,A.point.y,A.point.x,A.point.y)):p===C&&(c=M.C(w.point.x,w.point.y,w.point.x,w.point.y,w.point.x,w.point.y),l=M.C(w.point.x,w.point.y,k.point.x,k.point.y,k.point.x,k.point.y),f=M.C(L.point.x,L.point.y,E.point.x,E.point.y,E.point.x,E.point.y),v=M.C(E.point.x,E.point.y,A.point.x,A.point.y,A.point.x,A.point.y)),u+" "+s+" "+c+" "+l+" "+h+" "+f+" "+v):p===d?u+" "+s+" "+(c=M.C(w.point.x,w.point.y,T.point.x,T.point.y,T.point.x,T.point.y))+" "+(l=M.C(T.point.x,T.point.y,k.point.x,k.point.y,k.point.x,k.point.y))+" "+h:p===C?u+" "+s+" "+h+" "+(f=M.C(L.point.x,L.point.y,E.point.x,E.point.y,E.point.x,E.point.y))+" "+(v=M.C(E.point.x,E.point.y,A.point.x,A.point.y,A.point.x,A.point.y)):void 0}return function(g){var b=g.radius,m=g.widths,A=g.shapes,M=g.offset;void 0===M&&(M=0);var w=g.arcDasharray;void 0===w&&(w=[]);var k=g.align;void 0===k&&(k="face-out");var L=g.morphingShape;void 0===L&&(L=!1);var S=g.attributes;if(void 0===S&&(S={}),void 0===b)throw new TypeError("[PhotonSphere]: radius must not null");if(void 0===m)throw new TypeError("[PhotonSphere]: widths must not null");if(void 0===A)throw new TypeError("[PhotonSphere]: shapes must not null");var E,j,I,H=[],N=0,R=0,G=0;if(Array.isArray(m)&&m.length>0?(E=m[0],j=function(t){for(var n=t[0],i=0;i<t.length;i++)n<t[i]&&(n=t[i]);return n}(m)):(E=m,j=m),I=Array.isArray(A)&&A.length>0?A[0]:A,N+=P(M),Array.isArray(w)&&w.length>0){if(0===P(w[0]))return H;for(;N<t;){var J=(R+1)%2!=0,K={},Q={},U=P(w[R%w.length]);if(U>t-N&&(U=t-N),Array.isArray(m)&&m.length>0&&(E=m[G%m.length]),Array.isArray(A)&&A.length>0&&(I=A[G%A.length]),J){var W=void 0,X=T(E,j,k);switch(I){case i:W=V(b,E,X,L,N,N+U);break;case o:W=D(b,E,X,L,N,N+U);break;case p:case e:case r:case y:W=O(b,E,X,L,I,N,N+U);break;case x:W=Z(b,E,X,L,N,N+U);break;case a:case u:W=q(b,E,X,L,I,N,N+U);break;case s:case c:case l:case h:W=z(b,E,X,L,I,N,N+U);break;case f:case v:W=B(b,E,X,L,I,N,N+U);break;case d:case C:W=F(b,E,X,L,I,N,N+U);break;default:W=V(b,E,X,L,N,N+U)}if("object"==typeof S)for(var Y in S){var $=S[Y];Array.isArray($)&&$.length>0?Q[Y]=$[G%$.length]:Q[Y]=$}K.path=W,K.attributes=Q,H.push(K),G++}N+=U,R++}}else{var _,tt={},nt={};switch(I){case i:_=V(b,E,0,L,0,n);break;case o:_=D(b,E,0,L,0,n);break;case p:case e:case r:case y:_=O(b,E,0,L,I,0,n);break;case x:_=Z(b,E,0,L,0,n);break;case a:case u:_=q(b,E,0,L,I,0,n);break;case s:case c:case l:case h:_=z(b,E,0,L,I,0,n);break;case f:case v:_=B(b,E,0,L,I,0,n);break;case d:case C:_=F(b,E,0,L,I,0,n);break;default:_=V(b,E,0,L,0,n)}if("object"==typeof S)for(var it in S){var ot=S[it];Array.isArray(ot)&&ot.length>0?nt[it]=ot[0]:nt[it]=ot}tt.path=_,tt.attributes=nt,H.push(tt)}return H}}));
